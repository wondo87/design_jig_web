@ -9,39 +9,55 @@
        /* [디자인지그 전용 프리미엄 레이아웃] */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; color: #111; background: #fff; line-height: 1.5; }
        .header { padding: 2rem 4rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
        
        /* [수정 1] 헤더 상단 고정 */
        .header { 
            padding: 2rem 4rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #eee;
            /* 고정을 위한 핵심 스타일 */
            position: sticky; 
            top: 0; 
            background: rgba(255, 255, 255, 0.98); /* 배경을 살짝 불투명하게 */
            z-index: 1000; /* 다른 요소들보다 위에 오도록 */
        }
        .logo { font-size: 1.2rem; font-weight: 700; text-decoration: none; color: #000; }
        
        /* 목록 그리드 */
        .portfolio-section { max-width: 1600px; margin: 0 auto; padding: 4rem; }
        .portfolio-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(450px, 1fr)); gap: 40px; }
        .portfolio-card { cursor: pointer; }
        .portfolio-card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; }
        .portfolio-card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; transition: opacity 0.3s; }
        .portfolio-card:hover img { opacity: 0.8; }
        .portfolio-card h3 { margin-top: 15px; font-size: 1rem; font-weight: 400; }

        /* [핵심] 프로젝트 상세 보기 레이어 */
        /* 프로젝트 상세 보기 레이어 */
        #detailView { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 2000; overflow-y: auto; }
        #detailView.active { display: block; }
        
        .detail-container { display: flex; max-width: 1600px; margin: 0 auto; padding: 100px 4rem; gap: 60px; }
        .detail-slider { flex: 1.2; position: relative; background: #f9f9f9; height: 70vh; display: flex; align-items: center; justify-content: center; }
        .detail-slider img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .detail-container { display: flex; max-width: 1600px; margin: 0 auto; padding: 100px 4rem; gap: 60px; min-height: 100vh; }
        .detail-slider { flex: 1.2; position: relative; background: #fbfbfb; height: 75vh; display: flex; align-items: center; justify-content: center; }
        .detail-slider img { max-width: 100%; max-height: 100%; object-fit: contain; transition: opacity 0.5s ease-in-out; }
        
        .detail-info { flex: 0.8; }
        .detail-info { flex: 0.8; padding-top: 20px; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; border-top: 1px solid #eee; padding-top: 30px; margin-top: 30px; }
        .info-item h4 { font-size: 0.8rem; color: #999; margin-bottom: 5px; font-weight: 400; }
        .info-item p { font-size: 0.95rem; color: #333; }

        .close-btn { position: fixed; top: 30px; right: 40px; font-size: 3rem; border: none; background: none; cursor: pointer; z-index: 2100; font-weight: 100; }
        .slide-btn { position: absolute; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 3rem; color: #ddd; cursor: pointer; padding: 20px; }
        .close-btn { position: fixed; top: 30px; right: 40px; font-size: 3rem; border: none; background: none; cursor: pointer; z-index: 2100; font-weight: 100; color: #333; transition: color 0.3s; }
        .close-btn:hover { color: #000; }
        .slide-btn { position: absolute; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 3rem; color: #e0e0e0; cursor: pointer; padding: 20px; transition: color 0.3s; }
        .slide-btn:hover { color: #333; }
        
        @media (max-width: 1100px) { .detail-container { flex-direction: column; } .detail-info { padding-left: 0; } }
        @media (max-width: 1100px) { .detail-container { flex-direction: column; padding: 6rem 2rem; } .detail-info { padding-left: 0; } .detail-slider { height: 50vh; } }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="logo">DESIGN JIG</a>
        <nav><a href="portfolio.html" style="text-decoration:none; color:#111;">Project</a></nav>
        <nav><a href="portfolio.html" style="text-decoration:none; color:#111; font-weight: 500;">Project</a></nav>
    </header>

    <div class="portfolio-section">
@ -59,9 +75,8 @@
                <button class="slide-btn" style="right:0" onclick="changeImg(1)">›</button>
            </div>
            <div class="detail-info">
                <h2 id="projTitle" style="font-size: 2rem; font-weight: 400; margin-bottom: 20px;"></h2>
                <div class="info-grid" id="infoGrid">
                    </div>
                <h2 id="projTitle" style="font-size: 2rem; font-weight: 400; margin-bottom: 30px;"></h2>
                <div class="info-grid" id="infoGrid"></div>
            </div>
        </div>
    </div>
@ -70,13 +85,12 @@
        let projects = [];
        let curIdx = 0;
        let imgIdx = 0;
        let slideTimer = null; // [수정 2] 자동 슬라이드 타이머 변수

        async function init() {
            try {
                const res = await fetch('/.netlify/functions/portfolio');
                projects = await res.json();
                console.log("불러온 데이터:", projects); // 데이터 확인용 로그

                const grid = document.getElementById('portfolioGrid');
                grid.innerHTML = projects.map((p, i) => {
                    const props = p.properties;
@ -84,23 +98,21 @@
                    const title = props.이름?.title?.[0]?.plain_text || "제목 없음";
                    return `
                        <div class="portfolio-card" onclick="openDetail(${i})">
                            <img src="${img}">
                            <img src="${img}" loading="lazy">
                            <h3>${title}</h3>
                        </div>
                    `;
                }).join('');
            } catch (err) {
                console.error("초기화 에러:", err);
            }
            } catch (err) { console.error(err); }
        }

        function openDetail(i) {
            console.log(i + "번째 프로젝트 클릭됨");
            curIdx = i;
            imgIdx = 0;
            updateContent();
            document.getElementById('detailView').classList.add('active');
            document.body.style.overflow = 'hidden';
            startAutoSlide(); // [수정 2] 상세창 열리면 자동 슬라이드 시작
        }

        function updateContent() {
@ -108,11 +120,15 @@
                const p = projects[curIdx].properties;
                const images = p.URL?.files || [];
                
                // 이미지와 제목
                document.getElementById('mainImg').src = images[imgIdx]?.external?.url || "";
                const mainImg = document.getElementById('mainImg');
                mainImg.style.opacity = 0; // 부드러운 전환을 위한 깜빡임 효과
                setTimeout(() => {
                    mainImg.src = images[imgIdx]?.external?.url || "";
                    mainImg.style.opacity = 1;
                }, 200);

                document.getElementById('projTitle').textContent = p.이름?.title?.[0]?.plain_text || "-";
                
                // 상세 정보 매핑 (노션 속성명 기준)
                const infoHtml = `
                    <div class="info-item"><h4>면적</h4><p>${p.면적?.select?.name || p.면적?.rich_text?.[0]?.plain_text || "-"}</p></div>
                    <div class="info-item"><h4>주거형태</h4><p>${p.카테고리?.select?.name || "-"}</p></div>
@ -120,19 +136,33 @@
                    <div class="info-item"><h4>가구</h4><p>${p.가구?.select?.name || p.가구?.rich_text?.[0]?.plain_text || "-"}</p></div>
                `;
                document.getElementById('infoGrid').innerHTML = infoHtml;
            } catch (err) {
                console.error("상세보기 업데이트 에러:", err);
            }
            } catch (err) { console.error(err); }
        }

        function changeImg(dir) {
            stopAutoSlide(); // 수동 조작 시 타이머 잠시 멈춤
            const imgs = projects[curIdx].properties.URL?.files || [];
            if (imgs.length === 0) return;
            imgIdx = (imgIdx + dir + imgs.length) % imgs.length;
            document.getElementById('mainImg').src = imgs[imgIdx]?.external?.url || "";
            updateContent();
            startAutoSlide(); // 다시 자동 슬라이드 시작
        }

        // [수정 2] 자동 슬라이드 시작 함수 (3초 간격)
        function startAutoSlide() {
            stopAutoSlide();
            slideTimer = setInterval(() => {
                changeImg(1);
            }, 3000); 
        }

        // [수정 2] 자동 슬라이드 정지 함수
        function stopAutoSlide() {
            if (slideTimer) clearInterval(slideTimer);
        }

        function closeDetail() {
            stopAutoSlide(); // [수정 2] 창 닫으면 자동 슬라이드 완전 정지
            document.getElementById('detailView').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
